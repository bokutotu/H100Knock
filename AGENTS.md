# AGENTS

このリポジトリで自動化エージェントが作業するときの方針メモです。

1. **ゴール**
   - 小規模な関数実装から始め、最終的には深層学習コンパイラのような大規模コンポーネントを書けるコーディング力を養う。
   - 各課題は「まず動くものを書く」を優先し、製品レベルの最適化は後回しでよい。

2. **プラクティスの進め方**
   1. 純粋関数／リスト操作／再帰／fold など、標準ライブラリのみで書ける基礎文法を確実にする。
   2. `Map`/`Set`、パターンガード、型クラス制約など抽象度の高い API を扱う。
   3. IO・パーサコンビネータ・モナド変換子・並列処理などを段階的に習得する。
   4. モナドの代表例（`Maybe`/`Either`/`Reader`/`Writer`/`State`/`ExceptT`/`ReaderT` 等）を、ライブラリを使わずに構文面から理解する演習を行う。
   5. その後、よく使われる外部ライブラリ（例: `mtl`・`transformers`・`unliftio`・`conduit`・`resourcet` など）を導入し、モナドスタックの設計や効果の組み合わせ方を学ぶ。
   6. 学んだモナドとライブラリを用いた演習（軽量な Web クライアント、簡単な CLI ツール、ストリーム処理など）をこなす。
   7. 深層学習コンパイラを意識した最終課題として、行列演算・自動微分・中間表現(IR)・最適化パス・DSL 設計を段階的に 1 つのプロジェクトへ統合する。

   ライブラリ課題では、`mtl` 系で `ReaderT`/`StateT`/`ExceptT` を積んだサンプルや、`conduit`/`pipes` を使ったストリーミング処理などをテーマに追加する。

3. **コードスタイル**
   - GHC2024 言語拡張セットを前提にする。
   - 動作確認を最優先しつつ、読みやすさとテストの自己文書性を保つ。
   - エラーメッセージは利用者が理解しやすい表現にする。

4. **テスト**
   - hspec + hspec-discover を使用。
   - 問題文と期待結果を日本語で記述し、学習者が仕様を読み取りやすくする。
   - 未実装の関数は `error "TODO"` などで明示し、実装後にテストを通す流れを徹底する。
   - 新しい問題を追加するときは、対応するテストケースを `test` ディレクトリに追加し、関数シグネチャを該当モジュールに用意すること。

5. **ログ/ドキュメント更新**
   - 新しい課題を追加したら、このファイルまたは専用ドキュメントに方針・意図を追記する。
